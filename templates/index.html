{% extends "base.html" %}
{% load static %}

{% include 'nav-bar.html' %}
{% block content %}
<section class="container">
    <div class="gradient-box" style="{{ css_code }}"></div>
    <div class="controls">
        <form method="GET" action="{% url 'generate_gradient' %}" class="color-input-form">
            {% for field in form %}
                {% if field.name != 'random' %}
<!--                    {{ field.label_tag }}-->
                            {{ field }}
                        <div class="color-swatch" data-for="{{ field.id }}">
<!--                        <div class="color-swatch" style="background-color: {{ field.value }};" data-for="{{ field.id }}">-->
                            <span class="color-value-text">{{ field.value }}</span>
                        </div>
<!--                    {% if field.help_text %}-->
<!--                        <span class="helptext">{{ field.help_text }}</span>-->
<!--                    {% endif %}-->
                {% endif %}
            {% endfor %}
            <button class="update">Update Gradient</button>
        </form>

        <div class="css-code-container">
            <button id="copy">Copy Code</button>
            <textarea id="css-code-area" class="css-code" readonly>{{ css_code }}</textarea>
        </div>
    </div>
</section>
<section class="saved-palettes">
    <details>
        <summary>
            <h2>Saved Palettes</h2>
        </summary>
        <article>
            <ul type="none">
                {% for palette in saved_palettes %}
                <li {% if palette.id == active_palette_id %}class="active-palette"{% endif %}>
                    <a href="{% url 'get_palette' palette_id=palette.id %}">
                        Palette {{ palette.id }}
                    </a>
                    {% if user.is_authenticated and palette.user == user %}
                        <a href="{% url 'edit-palette' palette.id %}">Edit</a>
                        <a href="{% url 'delete-palette' palette.id %}">Delete</a>
                    {% endif %}
                </li>
                {% empty %}
                <li>No palettes saved yet.</li>
                {% endfor %}
            </ul>
            <div class="pagination">
                {% if saved_palettes.has_previous %}
                    <button><a href="?page={{ saved_palettes.previous_page_number }}">Previous</a></button>
                {% endif %}
                {% if saved_palettes.has_next %}
                    <button><a href="?page={{ saved_palettes.next_page_number }}">Next</a></button>
                {% endif %}
            </div>
        </article>
    </details>
</section>
<script src="{% static 'script.js' %}"></script>
{% endblock %}